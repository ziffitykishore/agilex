<?xml version="1.0"?>
<!--
/**
 * Copyright Â© 2018 Vantiv, LLC. All rights reserved.
 * See LICENSE.txt for license details.
 */
-->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">

    <!-- Echeck Method Facade Configuration -->
    <virtualType name="Vantiv\Payment\Model\VantivEcheckFacade" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Vantiv\Payment\Gateway\Echeck\Config\VantivEcheckConfig::METHOD_CODE</argument>
            <argument name="formBlockType" xsi:type="string">Vantiv\Payment\Block\Form\Echeck</argument>
            <argument name="infoBlockType" xsi:type="string">Vantiv\Payment\Block\Info\Echeck</argument>
            <argument name="valueHandlerPool" xsi:type="object">Vantiv\Payment\Gateway\Echeck\Config\ConfigValueHandlerPool</argument>
            <argument name="validatorPool" xsi:type="object">Vantiv\Payment\Gateway\Echeck\PaymentValidatorPool</argument>
            <argument name="commandPool" xsi:type="object">Vantiv\Payment\Gateway\Echeck\CommandPool</argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Model\VantivEcheckVaultFacade" type="Magento\Vault\Model\Method\Vault">
        <arguments>
            <argument name="code" xsi:type="const">Vantiv\Payment\Gateway\Echeck\Config\VantivEcheckConfig::VAULT_CODE</argument>
            <argument name="config" xsi:type="object">Vantiv\Payment\Gateway\Echeck\Config\VantivEcheckVaultConfig</argument>
            <argument name="valueHandlerPool" xsi:type="object">Vantiv\Payment\Gateway\Echeck\Config\VaultConfigValueHandlerPool</argument>
            <argument name="vaultProvider" xsi:type="object">Vantiv\Payment\Model\VantivEcheckFacade</argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Echeck\CommandManager" type="Magento\Payment\Gateway\Command\CommandManager">
        <arguments>
            <argument name="commandPool" xsi:type="object">Vantiv\Payment\Gateway\Echeck\CommandPool</argument>
        </arguments>
    </virtualType>
    <type name="Magento\Payment\Gateway\Command\CommandManagerPool">
        <arguments>
            <argument name="executors" xsi:type="array">
                <item name="vantiv_echeck" xsi:type="string">Vantiv\Payment\Gateway\Echeck\CommandManager</item>
            </argument>
        </arguments>
    </type>
    <virtualType name="Vantiv\Payment\Gateway\Echeck\Config\ConfigValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">Vantiv\Payment\Gateway\Echeck\Config\ConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Echeck\Config\VaultConfigValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">Vantiv\Payment\Gateway\Echeck\Config\ConfigValueHandler</item>
                <item name="model" xsi:type="string">Vantiv\Payment\Gateway\Echeck\Config\VaultConfigValueHandler</item>
                <item name="title" xsi:type="string">Vantiv\Payment\Gateway\Echeck\Config\VaultConfigValueHandler</item>
                <item name="active" xsi:type="string">Vantiv\Payment\Gateway\Echeck\Config\VaultConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Echeck\Config\ConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">Vantiv\Payment\Gateway\Echeck\Config\VantivEcheckConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Echeck\Config\VaultConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">Vantiv\Payment\Gateway\Echeck\Config\VantivEcheckVaultConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Echeck\CommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="authorize" xsi:type="string">Vantiv\Payment\Gateway\Echeck\VerificationCommand</item>
                <item name="void" xsi:type="string">Vantiv\Payment\Gateway\Echeck\VoidCommand</item>
                <item name="cancel" xsi:type="string">Vantiv\Payment\Gateway\Echeck\CancelCommand</item>

                <item name="capture" xsi:type="string">Vantiv\Payment\Gateway\Echeck\SaleCommand</item>
                <item name="refund" xsi:type="string">Vantiv\Payment\Gateway\Echeck\CreditCommand</item>

                <item name="vault_authorize" xsi:type="string">Vantiv\Payment\Gateway\Echeck\VaultVerificationCommand</item>
                <item name="vault_sale" xsi:type="string">Vantiv\Payment\Gateway\Echeck\VaultSaleCommand</item>
                <item name="register_token" xsi:type="string">Vantiv\Payment\Gateway\Echeck\RegisterTokenCommand</item>
            </argument>
        </arguments>
    </virtualType>
    <type name="Vantiv\Payment\Controller\Vault\EcheckSave">
        <arguments>
            <argument name="commandManager" xsi:type="object">Vantiv\Payment\Gateway\Echeck\CommandManager</argument>
        </arguments>
    </type>
    <virtualType name="Vantiv\Payment\Gateway\Echeck\PaymentValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">Vantiv\Payment\Gateway\Echeck\CountryValidator</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Echeck\CountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">Vantiv\Payment\Gateway\Echeck\Config\VantivEcheckConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Echeck\Config\VantivEcheckVaultConfig" type="Vantiv\Payment\Gateway\Echeck\Config\VantivEcheckConfig">
        <arguments>
            <argument name="methodCode" xsi:type="const">Vantiv\Payment\Gateway\Echeck\Config\VantivEcheckConfig::VAULT_CODE</argument>
        </arguments>
    </virtualType>
    <type name="Vantiv\Payment\Gateway\Echeck\Config\VantivEcheckConfig">
        <arguments>
            <argument name="methodCode" xsi:type="const">Vantiv\Payment\Gateway\Echeck\Config\VantivEcheckConfig::METHOD_CODE</argument>
        </arguments>
    </type>
    <type name="Magento\Vault\Model\PaymentTokenFactory">
        <arguments>
            <argument name="tokenTypes" xsi:type="array">
                <item name="echeck" xsi:type="const">Vantiv\Payment\Model\Vault\EcheckTokenFactory::TOKEN_TYPE_ECHECK</item>
            </argument>
        </arguments>
    </type>

    <type name="Magento\Vault\Model\Method\Vault">
        <plugin name="vantiv_vault_plugin" type="Vantiv\Payment\Plugin\Model\Method\Vault" />
    </type>

    <!-- Vantiv Log Handler -->
    <type name="Vantiv\Payment\Model\Logger\Handler">
        <arguments>
            <argument name="filesystem" xsi:type="object">Magento\Framework\Filesystem\Driver\File</argument>
        </arguments>
    </type>

    <!-- Vantiv Custom Logger -->
    <type name="Vantiv\Payment\Model\Logger\Logger">
        <arguments>
            <argument name="name" xsi:type="string">VANTIV</argument>
            <argument name="handlers"  xsi:type="array">
                <item name="system" xsi:type="object">Vantiv\Payment\Model\Logger\Handler</item>
            </argument>
            <argument name="processors"  xsi:type="array"></argument>
        </arguments>
    </type>

    <!-- Vantiv Credit Card Facade -->
    <virtualType name="Vantiv\Payment\Model\VantivCcFacade" type="Vantiv\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Vantiv\Payment\Gateway\Cc\Config\VantivCcConfig::METHOD_CODE</argument>
            <argument name="formBlockType" xsi:type="string">Vantiv\Payment\Block\Form\Cc</argument>
            <argument name="infoBlockType" xsi:type="string">Vantiv\Payment\Block\Info\Cc</argument>
            <argument name="commandPool" xsi:type="object">Vantiv\Payment\Gateway\Cc\CommandPool</argument>
            <argument name="validatorPool" xsi:type="object">Vantiv\Payment\Gateway\Cc\PaymentValidatorPool</argument>
            <argument name="valueHandlerPool" xsi:type="object">Vantiv\Payment\Gateway\Cc\Config\ConfigValueHandlerPool</argument>
        </arguments>
    </virtualType>
    <type name="Vantiv\Payment\Model\Ui\CcConfigProvider">
        <arguments>
            <argument name="method" xsi:type="object">Vantiv\Payment\Model\VantivCcFacade</argument>
        </arguments>
    </type>
    <virtualType name="Vantiv\Payment\Model\VantivCcVaultFacade" type="Magento\Vault\Model\Method\Vault">
        <arguments>
            <argument name="code" xsi:type="const">Vantiv\Payment\Gateway\Cc\Config\VantivCcConfig::VAULT_CODE</argument>
            <argument name="config" xsi:type="object">Vantiv\Payment\Gateway\Cc\Config\VantivCcVaultConfig</argument>
            <argument name="valueHandlerPool" xsi:type="object">Vantiv\Payment\Gateway\Cc\Config\VaultConfigValueHandlerPool</argument>
            <argument name="vaultProvider" xsi:type="object">Vantiv\Payment\Model\VantivCcFacade</argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Cc\CommandManager" type="Magento\Payment\Gateway\Command\CommandManager">
        <arguments>
            <argument name="commandPool" xsi:type="object">Vantiv\Payment\Gateway\Cc\CommandPool</argument>
        </arguments>
    </virtualType>
    <type name="Magento\Payment\Gateway\Command\CommandManagerPool">
        <arguments>
            <argument name="executors" xsi:type="array">
                <item name="vantiv_cc" xsi:type="string">Vantiv\Payment\Gateway\Cc\CommandManager</item>
            </argument>
        </arguments>
    </type>
    <type name="Vantiv\Payment\Controller\Vault\CcSave">
        <arguments>
            <argument name="commandManager" xsi:type="object">Vantiv\Payment\Gateway\Cc\CommandManager</argument>
        </arguments>
    </type>
    <virtualType name="Vantiv\Payment\Gateway\Cc\CommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="authorize" xsi:type="string">Vantiv\Payment\Gateway\Cc\AuthorizeCommand</item>
                <item name="void" xsi:type="string">Vantiv\Payment\Gateway\Cc\VoidCommand</item>
                <item name="capture" xsi:type="string">Vantiv\Payment\Gateway\Cc\CaptureCommand</item>
                <item name="sale" xsi:type="string">Vantiv\Payment\Gateway\Cc\SaleCommand</item>
                <item name="refund" xsi:type="string">Vantiv\Payment\Gateway\Cc\RefundCommand</item>
                <item name="cancel" xsi:type="string">Vantiv\Payment\Gateway\Cc\CancelCommand</item>
                <item name="accept_payment" xsi:type="string">Vantiv\Payment\Gateway\Cc\AcceptCommand</item>
                <item name="deny_payment" xsi:type="string">Vantiv\Payment\Gateway\Cc\DenyCommand</item>
                <item name="vault_authorize" xsi:type="string">Vantiv\Payment\Gateway\Cc\VaultAuthorizeCommand</item>
                <item name="vault_sale" xsi:type="string">Vantiv\Payment\Gateway\Cc\VaultSaleCommand</item>
                <item name="register_token" xsi:type="string">Vantiv\Payment\Gateway\Cc\RegisterTokenCommand</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Cc\PaymentValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">Vantiv\Payment\Gateway\Cc\CountryValidator</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Cc\CountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">Vantiv\Payment\Gateway\Cc\Config\VantivCcConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Cc\Config\ConfigValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">Vantiv\Payment\Gateway\Cc\Config\ConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Cc\Config\VaultConfigValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">Vantiv\Payment\Gateway\Cc\Config\ConfigValueHandler</item>
                <item name="model" xsi:type="string">Vantiv\Payment\Gateway\Cc\Config\VaultConfigValueHandler</item>
                <item name="active" xsi:type="string">Vantiv\Payment\Gateway\Cc\Config\VaultConfigValueHandler</item>
                <item name="title" xsi:type="string">Vantiv\Payment\Gateway\Cc\Config\VaultConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Cc\Config\ConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">Vantiv\Payment\Gateway\Cc\Config\VantivCcConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Cc\Config\VaultConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">Vantiv\Payment\Gateway\Cc\Config\VantivCcVaultConfig</argument>
        </arguments>
    </virtualType>
    <type name="Vantiv\Payment\Gateway\Cc\Config\VantivCcConfig">
        <arguments>
            <argument name="methodCode" xsi:type="const">Vantiv\Payment\Gateway\Cc\Config\VantivCcConfig::METHOD_CODE</argument>
        </arguments>
    </type>
    <virtualType name="Vantiv\Payment\Gateway\Cc\Config\VantivCcVaultConfig" type="Vantiv\Payment\Gateway\Cc\Config\VantivCcConfig">
        <arguments>
            <argument name="methodCode" xsi:type="const">Vantiv\Payment\Gateway\Cc\Config\VantivCcConfig::VAULT_CODE</argument>
        </arguments>
    </virtualType>

    <!-- Vantiv Apple Pay Facade -->
    <virtualType name="Vantiv\Payment\Model\VantivApplepayFacade" type="Vantiv\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Vantiv\Payment\Gateway\Applepay\Config\VantivApplepayConfig::METHOD_CODE</argument>
            <argument name="formBlockType" xsi:type="string">Vantiv\Payment\Block\Form\Applepay</argument>
            <argument name="infoBlockType" xsi:type="string">Vantiv\Payment\Block\Info\Applepay</argument>
            <argument name="commandPool" xsi:type="object">Vantiv\Payment\Gateway\Applepay\CommandPool</argument>
            <argument name="validatorPool" xsi:type="object">Vantiv\Payment\Gateway\Applepay\PaymentValidatorPool</argument>
            <argument name="valueHandlerPool" xsi:type="object">Vantiv\Payment\Gateway\Applepay\Config\ConfigValueHandlerPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="Vantiv\Payment\Gateway\Applepay\AuthorizeCommand" type="Vantiv\Payment\Gateway\Cc\AuthorizeCommand" />
    <virtualType name="Vantiv\Payment\Gateway\Applepay\VoidCommand" type="Vantiv\Payment\Gateway\Cc\VoidCommand" />
    <virtualType name="Vantiv\Payment\Gateway\Applepay\CaptureCommand" type="Vantiv\Payment\Gateway\Cc\CaptureCommand" />
    <virtualType name="Vantiv\Payment\Gateway\Applepay\SaleCommand" type="Vantiv\Payment\Gateway\Cc\SaleCommand" />
    <virtualType name="Vantiv\Payment\Gateway\Applepay\RefundCommand" type="Vantiv\Payment\Gateway\Cc\RefundCommand" />
    <virtualType name="Vantiv\Payment\Gateway\Applepay\CancelCommand" type="Vantiv\Payment\Gateway\Cc\CancelCommand">
        <arguments>
            <argument name="voidCommand" xsi:type="object">Vantiv\Payment\Gateway\Applepay\VoidCommand</argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Applepay\AcceptCommand" type="Vantiv\Payment\Gateway\Cc\AcceptCommand" />
    <virtualType name="Vantiv\Payment\Gateway\Applepay\DenyCommand" type="Vantiv\Payment\Gateway\Cc\DenyCommand" />

    <virtualType name="Vantiv\Payment\Gateway\Applepay\VaultAuthorizeCommand" type="Vantiv\Payment\Gateway\Cc\VaultAuthorizeCommand" />
    <virtualType name="Vantiv\Payment\Gateway\Applepay\VaultSaleCommand" type="Vantiv\Payment\Gateway\Cc\VaultSaleCommand" />

    <virtualType name="Vantiv\Payment\Gateway\Applepay\CommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="authorize" xsi:type="string">Vantiv\Payment\Gateway\Applepay\AuthorizeCommand</item>
                <item name="void" xsi:type="string">Vantiv\Payment\Gateway\Applepay\VoidCommand</item>
                <item name="capture" xsi:type="string">Vantiv\Payment\Gateway\Applepay\CaptureCommand</item>
                <item name="sale" xsi:type="string">Vantiv\Payment\Gateway\Applepay\SaleCommand</item>
                <item name="refund" xsi:type="string">Vantiv\Payment\Gateway\Applepay\RefundCommand</item>
                <item name="cancel" xsi:type="string">Vantiv\Payment\Gateway\Applepay\CancelCommand</item>
                <item name="accept_payment" xsi:type="string">Vantiv\Payment\Gateway\Applepay\AcceptCommand</item>
                <item name="deny_payment" xsi:type="string">Vantiv\Payment\Gateway\Applepay\DenyCommand</item>

                <item name="vault_authorize" xsi:type="string">Vantiv\Payment\Gateway\Applepay\VaultAuthorizeCommand</item>
                <item name="vault_sale" xsi:type="string">Vantiv\Payment\Gateway\Applepay\VaultSaleCommand</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Applepay\PaymentValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">Vantiv\Payment\Gateway\Applepay\CountryValidator</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Applepay\CountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">Vantiv\Payment\Gateway\Applepay\Config\VantivApplepayConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Applepay\Config\ConfigValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">Vantiv\Payment\Gateway\Applepay\Config\ConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Applepay\Config\VaultConfigValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">Vantiv\Payment\Gateway\Applepay\Config\ConfigValueHandler</item>
                <item name="model" xsi:type="string">Vantiv\Payment\Gateway\Applepay\Config\VaultConfigValueHandler</item>
                <item name="active" xsi:type="string">Vantiv\Payment\Gateway\Applepay\Config\VaultConfigValueHandler</item>
                <item name="title" xsi:type="string">Vantiv\Payment\Gateway\Applepay\Config\VaultConfigValueHandler</item>
                <item name="can_use_internal" xsi:type="string">Vantiv\Payment\Gateway\Applepay\Config\VaultConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Applepay\Config\ConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">Vantiv\Payment\Gateway\Applepay\Config\VantivApplepayConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Applepay\Config\VaultConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">Vantiv\Payment\Gateway\Applepay\Config\VantivApplepayVaultConfig</argument>
        </arguments>
    </virtualType>
    <type name="Vantiv\Payment\Gateway\Applepay\Config\VantivApplepayConfig">
        <arguments>
            <argument name="methodCode" xsi:type="const">Vantiv\Payment\Gateway\Applepay\Config\VantivApplepayConfig::METHOD_CODE</argument>
        </arguments>
    </type>

    <virtualType name="Vantiv\Payment\Gateway\Applepay\CommandManager" type="Magento\Payment\Gateway\Command\CommandManager">
        <arguments>
            <argument name="commandPool" xsi:type="object">Vantiv\Payment\Gateway\Applepay\CommandPool</argument>
        </arguments>
    </virtualType>
    <type name="Magento\Payment\Gateway\Command\CommandManagerPool">
        <arguments>
            <argument name="executors" xsi:type="array">
                <item name="vantiv_applepay" xsi:type="string">Vantiv\Payment\Gateway\Applepay\CommandManager</item>
            </argument>
        </arguments>
    </type>

    <virtualType name="Vantiv\Payment\Model\VantivApplepayVaultFacade" type="Magento\Vault\Model\Method\Vault">
        <arguments>
            <argument name="code" xsi:type="const">Vantiv\Payment\Gateway\Applepay\Config\VantivApplepayConfig::VAULT_CODE</argument>
            <argument name="config" xsi:type="object">Vantiv\Payment\Gateway\Applepay\Config\VantivApplepayVaultConfig</argument>
            <argument name="valueHandlerPool" xsi:type="object">Vantiv\Payment\Gateway\Applepay\Config\VaultConfigValueHandlerPool</argument>
            <argument name="vaultProvider" xsi:type="object">Vantiv\Payment\Model\VantivApplepayFacade</argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Applepay\Config\VantivApplepayVaultConfig" type="Vantiv\Payment\Gateway\Applepay\Config\VantivApplepayConfig">
        <arguments>
            <argument name="methodCode" xsi:type="const">Vantiv\Payment\Gateway\Applepay\Config\VantivApplepayConfig::VAULT_CODE</argument>
        </arguments>
    </virtualType>

    <!-- Vantiv Android Pay Facade -->
    <virtualType name="Vantiv\Payment\Model\VantivAndroidpayFacade" type="Vantiv\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Vantiv\Payment\Gateway\Androidpay\Config\VantivAndroidpayConfig::METHOD_CODE</argument>
            <argument name="formBlockType" xsi:type="string">Vantiv\Payment\Block\Form\Androidpay</argument>
            <argument name="infoBlockType" xsi:type="string">Vantiv\Payment\Block\Info\Androidpay</argument>
            <argument name="commandPool" xsi:type="object">Vantiv\Payment\Gateway\Androidpay\CommandPool</argument>
            <argument name="validatorPool" xsi:type="object">Vantiv\Payment\Gateway\Androidpay\PaymentValidatorPool</argument>
            <argument name="valueHandlerPool" xsi:type="object">Vantiv\Payment\Gateway\Androidpay\Config\ConfigValueHandlerPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="Vantiv\Payment\Gateway\Androidpay\AuthorizeCommand" type="Vantiv\Payment\Gateway\Cc\AuthorizeCommand" />
    <virtualType name="Vantiv\Payment\Gateway\Androidpay\VoidCommand" type="Vantiv\Payment\Gateway\Cc\VoidCommand" />
    <virtualType name="Vantiv\Payment\Gateway\Androidpay\CaptureCommand" type="Vantiv\Payment\Gateway\Cc\CaptureCommand" />
    <virtualType name="Vantiv\Payment\Gateway\Androidpay\SaleCommand" type="Vantiv\Payment\Gateway\Cc\SaleCommand" />
    <virtualType name="Vantiv\Payment\Gateway\Androidpay\RefundCommand" type="Vantiv\Payment\Gateway\Cc\RefundCommand" />
    <virtualType name="Vantiv\Payment\Gateway\Androidpay\CancelCommand" type="Vantiv\Payment\Gateway\Cc\CancelCommand">
        <arguments>
            <argument name="voidCommand" xsi:type="object">Vantiv\Payment\Gateway\Androidpay\VoidCommand</argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Androidpay\AcceptCommand" type="Vantiv\Payment\Gateway\Cc\AcceptCommand" />
    <virtualType name="Vantiv\Payment\Gateway\Androidpay\DenyCommand" type="Vantiv\Payment\Gateway\Cc\DenyCommand" />

    <virtualType name="Vantiv\Payment\Gateway\Androidpay\VaultAuthorizeCommand" type="Vantiv\Payment\Gateway\Cc\VaultAuthorizeCommand" />
    <virtualType name="Vantiv\Payment\Gateway\Androidpay\VaultSaleCommand" type="Vantiv\Payment\Gateway\Cc\VaultSaleCommand" />

    <virtualType name="Vantiv\Payment\Gateway\Androidpay\CommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="authorize" xsi:type="string">Vantiv\Payment\Gateway\Androidpay\AuthorizeCommand</item>
                <item name="void" xsi:type="string">Vantiv\Payment\Gateway\Androidpay\VoidCommand</item>
                <item name="capture" xsi:type="string">Vantiv\Payment\Gateway\Androidpay\CaptureCommand</item>
                <item name="sale" xsi:type="string">Vantiv\Payment\Gateway\Androidpay\SaleCommand</item>
                <item name="refund" xsi:type="string">Vantiv\Payment\Gateway\Androidpay\RefundCommand</item>
                <item name="cancel" xsi:type="string">Vantiv\Payment\Gateway\Androidpay\CancelCommand</item>
                <item name="accept_payment" xsi:type="string">Vantiv\Payment\Gateway\Androidpay\AcceptCommand</item>
                <item name="deny_payment" xsi:type="string">Vantiv\Payment\Gateway\Androidpay\DenyCommand</item>

                <item name="vault_authorize" xsi:type="string">Vantiv\Payment\Gateway\Androidpay\VaultAuthorizeCommand</item>
                <item name="vault_sale" xsi:type="string">Vantiv\Payment\Gateway\Androidpay\VaultSaleCommand</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Androidpay\PaymentValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">Vantiv\Payment\Gateway\Androidpay\CountryValidator</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Androidpay\CountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">Vantiv\Payment\Gateway\Androidpay\Config\VantivAndroidpayConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Androidpay\Config\ConfigValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">Vantiv\Payment\Gateway\Androidpay\Config\ConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Androidpay\Config\VaultConfigValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">Vantiv\Payment\Gateway\Androidpay\Config\ConfigValueHandler</item>
                <item name="model" xsi:type="string">Vantiv\Payment\Gateway\Androidpay\Config\VaultConfigValueHandler</item>
                <item name="title" xsi:type="string">Vantiv\Payment\Gateway\Androidpay\Config\VaultConfigValueHandler</item>
                <item name="active" xsi:type="string">Vantiv\Payment\Gateway\Androidpay\Config\VaultConfigValueHandler</item>
                <item name="can_use_internal" xsi:type="string">Vantiv\Payment\Gateway\Androidpay\Config\VaultConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Androidpay\Config\ConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">Vantiv\Payment\Gateway\Androidpay\Config\VantivAndroidpayConfig</argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Androidpay\Config\VaultConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">Vantiv\Payment\Gateway\Androidpay\Config\VantivAndroidpayVaultConfig</argument>
        </arguments>
    </virtualType>
    <type name="Vantiv\Payment\Gateway\Androidpay\Config\VantivAndroidpayConfig">
        <arguments>
            <argument name="methodCode" xsi:type="const">Vantiv\Payment\Gateway\Androidpay\Config\VantivAndroidpayConfig::METHOD_CODE</argument>
        </arguments>
    </type>

    <virtualType name="Vantiv\Payment\Gateway\Androidpay\CommandManager" type="Magento\Payment\Gateway\Command\CommandManager">
        <arguments>
            <argument name="commandPool" xsi:type="object">Vantiv\Payment\Gateway\Androidpay\CommandPool</argument>
        </arguments>
    </virtualType>
    <type name="Magento\Payment\Gateway\Command\CommandManagerPool">
        <arguments>
            <argument name="executors" xsi:type="array">
                <item name="vantiv_androidpay" xsi:type="string">Vantiv\Payment\Gateway\Androidpay\CommandManager</item>
            </argument>
        </arguments>
    </type>

    <virtualType name="Vantiv\Payment\Model\VantivAndroidVaultFacade" type="Magento\Vault\Model\Method\Vault">
        <arguments>
            <argument name="code" xsi:type="const">Vantiv\Payment\Gateway\Androidpay\Config\VantivAndroidpayConfig::VAULT_CODE</argument>
            <argument name="config" xsi:type="object">Vantiv\Payment\Gateway\Androidpay\Config\VantivAndroidpayVaultConfig</argument>
            <argument name="valueHandlerPool" xsi:type="object">Vantiv\Payment\Gateway\Androidpay\Config\VaultConfigValueHandlerPool</argument>
            <argument name="vaultProvider" xsi:type="object">Vantiv\Payment\Model\VantivAndroidpayFacade</argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Gateway\Androidpay\Config\VantivAndroidpayVaultConfig" type="Vantiv\Payment\Gateway\Androidpay\Config\VantivAndroidpayConfig">
        <arguments>
            <argument name="methodCode" xsi:type="const">Vantiv\Payment\Gateway\Androidpay\Config\VantivAndroidpayConfig::VAULT_CODE</argument>
        </arguments>
    </virtualType>

    <!-- Vantiv Paypal Facade -->
    <preference for="Vantiv\Payment\Helper\Paypal\Shortcut\ValidatorInterface" type="Vantiv\Payment\Helper\Paypal\Shortcut\Validator"/>
    <type name="Vantiv\Payment\Block\Paypal\Express\Shortcut">
        <arguments>
            <argument name="paymentMethodCode" xsi:type="const">Vantiv\Payment\Model\Paypal\Config::METHOD_CODE</argument>
            <argument name="startAction" xsi:type="string">vantiv/paypal_express/start/button/1</argument>
            <argument name="checkoutType" xsi:type="string">Vantiv\Payment\Model\Paypal\Express\Checkout</argument>
            <argument name="alias" xsi:type="string">product.info.addtocart.vantiv.paypal</argument>
            <argument name="shortcutTemplate" xsi:type="string">express/shortcut.phtml</argument>
        </arguments>
    </type>
    <type name="\Vantiv\Payment\Helper\Paypal\Data">
        <arguments>
            <argument name="methodCodes" xsi:type="array">
                <item name="expressCheckout" xsi:type="const">Vantiv\Payment\Model\Paypal\Config::METHOD_CODE</item>
            </argument>
        </arguments>
    </type>

    <!-- Vantiv Gift Card Settings -->
    <type name="Magento\GiftCardAccount\Observer\CreateGiftCard">
        <plugin name="vantiv_giftcard_account" type="Vantiv\Payment\Plugin\GiftCardAccount\Observer\CreateGiftCard" sortOrder="100"/>
    </type>
    <type name="Magento\GiftCardAccount\Model\Giftcardaccount">
        <plugin name="vantiv_giftcardaccount_plugin" type="Vantiv\Payment\Plugin\GiftCardAccount\Model\GiftCardAccount" sortOrder="100"/>
    </type>
    <type name="Magento\GiftCardAccount\Model\Pool">
        <plugin name="vantiv_giftcardaccount_pool_plugin" type="Vantiv\Payment\Plugin\GiftCardAccount\Model\Pool" sortOrder="100"/>
    </type>

    <!-- Vantiv Subscription Settings -->
    <virtualType name="Magento\Catalog\Pricing\Price\Pool" type="Magento\Framework\Pricing\Price\Pool">
        <arguments>
            <argument name="prices" xsi:type="array">
                <item name="vantiv_subscription_price" xsi:type="string">Vantiv\Payment\Pricing\Price\PlanPrice</item>
            </argument>
        </arguments>
    </virtualType>
    <type name="Magento\Catalog\Helper\Product\Configuration">
        <plugin name="vantiv_payment" type="Vantiv\Payment\Helper\Product\Configuration\Plugin" sortOrder="100"/>
    </type>
    <type name="Magento\Catalog\Model\Product">
        <plugin name="vantiv_payment" type="Vantiv\Payment\Model\ProductPlugin" sortOrder="100"/>
    </type>
    <type name="Magento\Catalog\Model\Product\Type\Simple">
        <plugin name="vantiv_payment" type="Vantiv\Payment\Model\Product\Type\SimplePlugin" sortOrder="100"/>
    </type>
    <type name="Magento\Catalog\Model\Product\Type\Virtual">
        <plugin name="vantiv_payment" type="Vantiv\Payment\Model\Product\Type\SimplePlugin" sortOrder="100"/>
    </type>
    <type name="Magento\Paypal\Helper\Shortcut\Validator">
        <plugin name="vantiv_payment" type="Vantiv\Payment\Helper\Paypal\Shortcut\ValidatorPlugin"/>
    </type>
    <type name="Vantiv\Payment\Helper\Paypal\Shortcut\Validator">
        <plugin name="vantiv_payment" type="Vantiv\Payment\Helper\Paypal\Shortcut\ValidatorPlugin"/>
    </type>
    <type name="Magento\Sales\Block\Order\Email\Items\DefaultItems">
        <plugin name="vantiv_payment" type="Vantiv\Payment\Block\Sales\Order\Email\Items\DefaultItemsPlugin" sortOrder="100"/>
    </type>
    <type name="Magento\Sales\Block\Order\Email\Items\Order\DefaultOrder">
        <plugin name="vantiv_payment" type="Vantiv\Payment\Block\Sales\Order\Email\Items\Order\DefaultOrderPlugin" sortOrder="100"/>
    </type>
    <type name="Magento\Sales\Block\Order\Item\Renderer\DefaultRenderer">
        <plugin name="vantiv_payment" type="Vantiv\Payment\Block\Sales\Order\Item\Renderer\DefaultRendererPlugin" sortOrder="100"/>
    </type>
    <virtualType name="Vantiv\Payment\Model\ResourceModel\Recurring\Subscription\Discount\Grid\Collection" type="Magento\Framework\View\Element\UiComponent\DataProvider\SearchResult">
        <arguments>
            <argument name="mainTable" xsi:type="string">vantiv_subscription_discount</argument>
            <argument name="resourceModel" xsi:type="string">\Vantiv\Payment\Model\ResourceModel\Recurring\Subscription\Discount</argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Model\ResourceModel\Recurring\Subscription\Addon\Grid\Collection" type="Magento\Framework\View\Element\UiComponent\DataProvider\SearchResult">
        <arguments>
            <argument name="mainTable" xsi:type="string">vantiv_subscription_addon</argument>
            <argument name="resourceModel" xsi:type="string">\Vantiv\Payment\Model\ResourceModel\Recurring\Subscription\Addon</argument>
        </arguments>
    </virtualType>
    <type name="Magento\Framework\View\Element\UiComponent\DataProvider\CollectionFactory">
        <arguments>
            <argument name="collections" xsi:type="array">
                <item name="vantiv_recurring_subscription_grid_data_source" xsi:type="string">Vantiv\Payment\Model\ResourceModel\Recurring\Subscription\Grid\Collection</item>
                <item name="vantiv_subscription_view_order_grid_data_source" xsi:type="string">Vantiv\Payment\Model\ResourceModel\Recurring\Subscription\Order\Grid\Collection</item>
                <item name="vantiv_subscription_view_discount_grid_data_source" xsi:type="string">Vantiv\Payment\Model\ResourceModel\Recurring\Subscription\Discount\Grid\Collection</item>
                <item name="vantiv_subscription_view_addon_grid_data_source" xsi:type="string">Vantiv\Payment\Model\ResourceModel\Recurring\Subscription\Addon\Grid\Collection</item>
                <item name="vantiv_recurring_recovery_grid_data_source" xsi:type="string">Vantiv\Payment\Model\ResourceModel\Recurring\RecoveryTransaction\Grid\Collection</item>
            </argument>
        </arguments>
    </type>
    <type name="Vantiv\Payment\Model\ResourceModel\Recurring\Subscription\Grid\Collection">
        <arguments>
            <argument name="eventPrefix" xsi:type="string">vantiv_subscription_grid_collection</argument>
            <argument name="eventObject" xsi:type="string">subscription_collection</argument>
        </arguments>
    </type>
    <type name="Vantiv\Payment\Model\ResourceModel\Recurring\RecoveryTransaction\Grid\Collection">
        <arguments>
            <argument name="eventPrefix" xsi:type="string">vantiv_recovery_grid_collection</argument>
            <argument name="eventObject" xsi:type="string">recovery_transaction_collection</argument>
        </arguments>
    </type>
    <virtualType name="Magento\Sales\Model\ResourceModel\Order\Grid" type="Magento\Sales\Model\ResourceModel\Grid">
        <arguments>
            <argument name="columns" xsi:type="array">
                <item name="vantiv_subscription_id" xsi:type="string">sales_order.vantiv_subscription_id</item>
            </argument>
        </arguments>
    </virtualType>
    <type name="Vantiv\Payment\Model\Recurring\Payment\Logger\Handler">
        <arguments>
            <argument name="filesystem" xsi:type="object">Magento\Framework\Filesystem\Driver\File</argument>
        </arguments>
    </type>
    <virtualType name="Vantiv\Payment\Model\Recurring\Payment\Logger" type="Magento\Framework\Logger\Monolog">
        <arguments>
            <argument name="name" xsi:type="string">VANTIV_RECURRING_PAYMENT</argument>
            <argument name="handlers" xsi:type="array">
                <item name="report" xsi:type="object">Vantiv\Payment\Model\Recurring\Payment\Logger\Handler</item>
            </argument>
            <argument name="processors" xsi:type="array"></argument>
        </arguments>
    </virtualType>
    <type name="Vantiv\Payment\Model\Recurring\RecoveryTransaction\Logger\Handler">
        <arguments>
            <argument name="filesystem" xsi:type="object">Magento\Framework\Filesystem\Driver\File</argument>
        </arguments>
    </type>
    <virtualType name="Vantiv\Payment\Model\Recurring\RecoveryTransaction\Logger" type="Magento\Framework\Logger\Monolog">
        <arguments>
            <argument name="name" xsi:type="string">VANTIV_RECOVERY_TRANSACTION</argument>
            <argument name="handlers" xsi:type="array">
                <item name="report" xsi:type="object">Vantiv\Payment\Model\Recurring\RecoveryTransaction\Logger\Handler</item>
            </argument>
            <argument name="processors" xsi:type="array"></argument>
        </arguments>
    </virtualType>
    <type name="Vantiv\Payment\Model\Recurring\Payment\Handler">
        <arguments>
            <argument name="logger" xsi:type="object">Vantiv\Payment\Model\Recurring\Payment\Logger</argument>
        </arguments>
    </type>
    <type name="Vantiv\Payment\Model\Recurring\RecoveryTransaction\Handler">
        <arguments>
            <argument name="logger" xsi:type="object">Vantiv\Payment\Model\Recurring\RecoveryTransaction\Logger</argument>
        </arguments>
    </type>
    <virtualType name="Vantiv\Payment\Cron\ImportRecurringPayments" type="Vantiv\Payment\Cron\ImportBatchResponse">
        <arguments>
            <argument name="config" xsi:type="object">Vantiv\Payment\Gateway\Recurring\Config\VantivSubscriptionConfig</argument>
            <argument name="handler" xsi:type="object">Vantiv\Payment\Model\Recurring\Payment\Handler</argument>
            <argument name="importCode" xsi:type="string">recurring_payment</argument>
            <argument name="importTitle" xsi:type="string">Recurring Payment</argument>
            <argument name="filePattern" xsi:type="string">recurring\.{$merchantId}\.{$mdY}\.\d{9}\.response</argument>
        </arguments>
    </virtualType>
    <virtualType name="Vantiv\Payment\Cron\ImportRecoveryTransactions" type="Vantiv\Payment\Cron\ImportBatchResponse">
        <arguments>
            <argument name="config" xsi:type="object">Vantiv\Payment\Gateway\Recurring\Config\VantivSubscriptionConfig</argument>
            <argument name="handler" xsi:type="object">Vantiv\Payment\Model\Recurring\RecoveryTransaction\Handler</argument>
            <argument name="importCode" xsi:type="string">recovery_transaction</argument>
            <argument name="importTitle" xsi:type="string">Recovery Transaction</argument>
            <argument name="filePattern" xsi:type="string">recycling\.{$merchantId}\.{$mdY}\.\d{1,19}\.response</argument>
        </arguments>
    </virtualType>

    <!-- Vantiv Certification Settings -->

    <type name="Magento\Sales\Model\Order">
        <plugin name="vantiv_payment_sales_order_model_plugin" type="Vantiv\Payment\Plugin\Model\Sales\Order" sortOrder="1" />
    </type>

</config>
